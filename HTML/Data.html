<!DOCTYPE html>
<html>
<title>Data</title>
<style>
table, th, td {
  border:1px solid black;
  height: 15px;
}
</style>

<body style="background-color: #888;">
<table style="width:100%" id = "logTable">
  <tr>
    <th>Date</th>
    <th>Exercise</th>
    <th>Durration</th>
    <th>Goal</th>
    <th>Total</th>
    <th>Percentage</th>
  </tr>
  
</table>

<meta id=logs content="1/1/2023, Running, 00:12:34, 00:60:00
1/2/2023, Biking, 00:43:21, 01:40:00
1/3/2023, Skateboarding, 00:15:00, 00:30:00
1/4/2023, Walking, 00:53:00, 00:45:00">



<script>

  readLogs();
  function readLogs()
  {
    var logs = document.getElementById("logs");
    var lines = logs.content.split("\n");
    for(var x = 0; x < lines.length; x++)
    {
      var items = lines[x].split(",");
      var log = 
      {
        Date: items[0],
        Exercise: items[1], 
        Durration: items[2],
        Goal: items[3]
      }
      addLogToTable(log);
    }
  }

  function addLogToTable(log)// adds a log to the table
  {//Date, Exercise, Durration, Goal, Total,	Percentage
    const table = document.getElementById("logTable");
    let row = table.insertRow();
    
    let Date = row.insertCell(0);
    Date.innerHTML = log.Date;

    let Exercise = row.insertCell(1);
    Exercise.innerHTML = log.Exercise;

    let Durration = row.insertCell(2);
    Durration.innerHTML = log.Durration;

    let Goal = row.insertCell(3);
    Goal.innerHTML = log.Goal;

    let Total = row.insertCell(4);
    //if(table.lineCount == "0") TODO: fix total
    //{
        Total.innerHTML = log.Durration;
    //}
    //else
    //{ 
    //  Total.innerHTML = 3;
      //Total.innerHTML = (log.rows.item(document.getElementById("lineCount").getAttribute("lineCount")).item(4).innerHTML) + log.Durration;    
   // }
   // lineCount = "1";

    let Percentage = row.insertCell(5);
    Percentage.innerHTML = ((timeToSeconds(log.Durration) / timeToSeconds(Goal.innerHTML)) * 100).toFixed(2) + "%";

    
  }
  function timeToSeconds(time)// converts time (hh:mm:ss) to seconds (sssss)
  {
    var splitArray = time.split(":");
    return (3600 * Number(splitArray[0])) + (60 * Number(splitArray[1])) + Number(splitArray[2]);
  }
  
  function secondsToTime(seconds)// converts seconds to time (hh:mm:ss)
  {
    var hours = seconds / 3600;
    var minutes = (seconds % 3600) / 60;
    return hours +":"+minutes+":"+ ((seconds % 3600) % 60);
  }

</script>
<div>
	<a href="Main.html">

		<button style="background-color: white; height: 50px; width: 310px; border-radius: 10px; font-size: 25px; border-style: solid">Exit</button>

	</a>	
</div>
</body>

</html>
